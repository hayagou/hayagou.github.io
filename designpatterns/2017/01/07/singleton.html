<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Singleton Pattern - Hayagou
    
  </title>

  <meta name="description" content="[디자인패턴]Singleton Pattern">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://hayagou.github.io/designpatterns/2017/01/07/singleton.html">
  <link rel="alternate" type="application/rss+xml" title="Hayagou" href="/feed.xml">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158054059-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-158054059-1');
  </script>
  <style>
    #myFont{
      font-size: 12px;
      font-weight: 800;
      letter-spacing: 1px;
      text-transform: uppercase;
    }
  </style>

  <script data-ad-client="ca-pub-4295120214669813" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Hayagou</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">

        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
            Category
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu dropdown-menu-left" role="menu" aria-labelledby="drop1" style="border: 0;" >
            
            
              
                
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/block%20chain.html" id="myFont"><span class="caret"></span> BlockChain</a></li>
                
              
            
              
                
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/design%20patterns.html" id="myFont"><span class="caret"></span> DesignPatterns</a></li>
                
              
            
              
                
              
            
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/machine%20learning.html" id="myFont"><span class="caret"></span> MachineLearning</a></li>
                
              
            
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/mobile.html" id="myFont"><span class="caret"></span> Mobile</a></li>
                
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/tool.html" id="myFont"><span class="caret"></span> Tool</a></li>
                
              
            
              
                
                  <li class="nav-item" role="presentation"><a class="nav-link "
                    role="menuitem" tabindex="-1" href="/category/web.html" id="myFont"><span class="caret"></span> Web</a></li>
                
              
            
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
                
              
            
              
            
              
            
          </ul>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>




  <!-- Page Header -->

<header class="masthead" style="background-image: url('/img/bg-post.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Singleton Pattern</h1>
            
            <span class="meta">Posted by
              <a href="#">hayagou</a>
              on 2017-01-07 &middot; <span class="reading-time" title="Estimated read time">
  
   2 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <h1 id="디자인패턴singleton-pattern">[디자인패턴]Singleton Pattern</h1>

<blockquote>
  <p>전역  변수를  사용하지  않고  객체를  하나만  생성  하도록  하며, 생성된  객체를  어디에서든지  참조할  수  있도록  하는  패턴</p>
</blockquote>

<ul>
  <li>
    <p>역할이  수행하는  작업</p>

    <ul>
      <li>Singleton : 하나의  인스턴스만을  생성하는  책임이  있으며 getInstance 메서드를  통해  모든  클라이언트에게  동일한  인스턴스를  반환하는  작업을  수행한다</li>
    </ul>

    <p><img src="/img/posts/ds/singleton1.png" alt="singleton" class="img-responsive center-block" /></p>
  </li>
</ul>

<h3 id="장점">장점</h3>

<ol>
  <li>
    <p>메모리  낭비  방지 , 데이터  공유  용이</p>
  </li>
  <li>
    <p>인스턴스가  절대적으로  한개만  존재하는  것을  보증하고  싶을  경우</p>
  </li>
  <li>
    <p>두  번째  이용시부터  객체  로딩  시간이  현저하게  줄어  성능이  좋아짐</p>
  </li>
</ol>

<h3 id="멀티쓰레드에서--안전한thread-safe-싱글톤--클래스-인스턴스--만드는--방법">멀티쓰레드에서  안전한(Thread-safe) 싱글톤  클래스, 인스턴스  만드는  방법</h3>

<ol>
  <li>
    <p>Thread safe Lazy initialization (게으른  초기화)<br />
private static으로  인스턴스  변수를  만들고 private 생성자로  외부에서  생성을  막았으며 synchronized 키워드를  사용해서 thread-safe하게  만들었다.<br />
하지만 synchronized 특성상  비교적  큰  성능저하가  발생하므로  권장하지  않는  방법이다.</p>

    <p><img src="/img/posts/ds/singleton2.png" alt="singleton" class="img-responsive center-block" /></p>
  </li>
  <li>
    <p>Thread safe lazy initialization + Double-checked locking</p>
    <ul>
      <li>게이른  초기화의  성능저하를  완화시키는  방법<br />
getInstance()에 synchronized를  사용하는  것이  아니라  첫  번째 if문으로  인스턴스의  존재여부를  체크하고  두  번째 if문에서  다시  한번  체크할  때  동기화  시켜서  인스턴스를  생성하므로 thread-safe하면서도  처음  생성  이후에 synchonized 블럭을  타지  않기  때문에  성능저하를  완화했다.그러나  완벽한  방법은  아니다.</li>
    </ul>
  </li>
</ol>

 	<img src="/img/posts/ds/singleton3.png" alt="singleton" class="img-responsive center-block" />

<ol>
  <li>
    <p>Initialization on demand holder idiom (holder에  의한  초기화)<br />
-클래스안에  클래스(Holder)를  두어 JVM의 Classloader매커니즘과 Class가  로드되는  시점을  이용한방법</p>

    <p><img src="/img/posts/ds/singleton4.png" alt="singleton" class="img-responsive center-block" /></p>

    <p>개발자가  직접  동기화  문제에  대해  코드를  작성하고  문제를  회피하려  한다면  프로그램  구조가  그  만큼  복잡해지고  비용  문제가  생길  수  있고  특히  정확하지  못한  경우가  많다.(100%가  아닐수  있음) 그런데  이  방법은 JVM의  클래스  초기화  과정에서  보장되는  원자적  특성을  이용하여  싱글턴의  초기화  문제에  대한  책임을 JVM에  떠넘긴다. holder안에  선언된 instance가 static이기  때문에  클래스  로딩시점에  한번만  호출될  것이며 final을  사용해  다시  값이  할당되지  않도록  만든  방법.<br />
<strong>가장  많이  사용하고  일반적인 Singleton 클래스  사용  방법이다.</strong></p>
  </li>
</ol>


        <hr>

        
        <div id="disqus_thread"></div>
        <script>
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://hayagou-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        
        <hr>
        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/designpatterns/2017/01/06/decorator.html" data-toggle="tooltip" data-placement="top" title="Decorator Pattern">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/designpatterns/2017/01/08/factory.html" data-toggle="tooltip" data-placement="top" title="Factory Method Pattern">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:de0978@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/hayagou">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; hayagou 2020</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-158054059-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-158054059-1');
</script>



</body>

</html>
